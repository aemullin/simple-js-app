let pokemonRepository=function(){let e=[],t='https://pokeapi.co/api/v2/pokemon/?limit=151';function n(t){'object'==typeof t&&'name'in t&&'detailsUrl'in t?e.push(t):console.log('error')}function o(e){let t=e.detailsUrl;return fetch(t).then(function(e){return e.json()}).then(function(t){e.imageUrl=t.sprites.front_default,e.height=t.height,e.weight=t.weight,e.types=t.types,e.abilities=t.abilities}).catch(function(e){console.error(e)})}let i=document.createElement('div');i.classList.add('modal'),i.setAttribute('id','targetModal'),i.setAttribute('tabindex','-1'),i.setAttribute('role','dialog');let d=document.createElement('div');d.classList.add('modal-dialog'),d.setAttribute('role','document');let a=document.createElement('div');a.classList.add('modal-content');let l=document.createElement('div');l.classList.add('modal-header');let s=document.createElement('h1');s.classList.add('modal-title');let c=document.createElement('button');c.setAttribute('type','button'),c.classList.add('close'),c.setAttribute('data-dismiss','modal'),c.setAttribute('aria-label','Close'),c.innerText='X';let r=document.createElement('div');r.classList.add('modal-body');let m=document.createElement('img');m.classList.add('pokemonimage'),document.createElement('div').classList.add('pokemon-stat');let p=document.createElement('p'),u=document.createElement('p'),h=document.createElement('p');return document.body.appendChild(i),i.appendChild(d),d.appendChild(a),a.appendChild(l),l.appendChild(s),l.appendChild(c),a.appendChild(r),r.appendChild(m),r.appendChild(p),r.appendChild(u),r.appendChild(h),{add:n,loadList:function(){return fetch(t).then(function(e){return e.json()}).then(function(e){e.results.forEach(function(e){n({name:e.name,detailsUrl:e.url})})}).catch(function(e){console.error(e)})},getAll:function(){return e},loadDetails:o,addListItem:function(e){let t=document.querySelector('.pokemon-list'),n=document.createElement('li');n.classList.add('list-group-item'),n.classList.add('col-xs-6'),n.classList.add('col-sm-4'),n.classList.add('col-md-3');let i=document.createElement('button');i.classList.add('pokemon-item'),i.innerText=e.name,i.addEventListener('click',function(){!function(e){o(e).then(function(){console.log(e),function(e){s.innerText=e.name,m.src=e.imageUrl;let t=.328084*e.height;t=t.toFixed(2),p.innerText='Height: '+t+' ft',p.classList.add('pokemon-height');let n=.220462*e.weight;n=n.toFixed(2),u.innerText='Weight: '+n+' lbs',u.classList.add('pokemon-weight'),h.classList.add('pokemon-type'),e.types[1]?h.innerText='Type: '+e.types[0].type.name+', '+e.types[1].type.name:h.innerText='Type: '+e.types[0].type.name}(e)})}(e)}),i.setAttribute('type','button'),i.classList.add('pokemon','btn'),i.setAttribute('data-toggle','modal'),i.setAttribute('data-target','#targetModal'),n.appendChild(i),t.appendChild(n)}}}();pokemonRepository.loadList().then(function(){document.querySelector('.poke-search').addEventListener('submit',function(e){e.preventDefault();let t=document.querySelector('#pokesearch').value.toLowerCase();document.querySelector('.pokemon-list').innerHTML='',''===t?pokemonRepository.getAll().forEach(function(e){pokemonRepository.addListItem(e)}):pokemonRepository.getAll().forEach(function(e){e.name.indexOf(t)>-1&&pokemonRepository.addListItem(e)})}),pokemonRepository.getAll().forEach(function(e){pokemonRepository.addListItem(e)})});
